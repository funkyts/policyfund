<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>정책자금 대출 진단테스트</title>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #ffffff;
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            background: #fff;
            min-height: 100vh;
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        /* 웰컴 페이지 */
        .welcome-page {
            padding: 40px 24px;
            text-align: center;
            background: white;
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .main-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 16px;
            line-height: 1.3;
            color: #1E293B;
        }

        .sub-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 24px;
            color: #64748B;
        }

        .benefits {
            background: #F8FAFC;
            border: 2px solid #E2E8F0;
            padding: 20px;
            border-radius: 16px;
            margin: 24px 0;
        }

        .benefit-item {
            display: flex;
            align-items: center;
            margin: 12px 0;
            font-size: 16px;
            color: #374151;
        }

        .benefit-item::before {
            content: "✓";
            margin-right: 12px;
            color: #10B981;
            font-weight: bold;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin: 32px 0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: #F59E0B;
        }

        .stat-label {
            font-size: 14px;
            color: #64748B;
        }

        .cta-button {
            background: linear-gradient(135deg, #F59E0B 0%, #EF4444 100%);
            color: white;
            border: none;
            padding: 18px 32px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(245, 158, 11, 0.4);
        }

        /* 질문 페이지 */
        .question-page {
            display: none;
            padding: 24px;
            min-height: 100vh;
            background: #F8FAFC;
        }

        .progress-bar {
            height: 6px;
            background: #E2E8F0;
            border-radius: 3px;
            margin-bottom: 32px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #1E40AF, #3B82F6);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 3px;
        }

        .question-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .question-number {
            font-size: 14px;
            color: #64748B;
            margin-bottom: 8px;
        }

        .question-title {
            font-size: 22px;
            font-weight: 700;
            color: #1E293B;
            margin-bottom: 8px;
        }

        .question-subtitle {
            font-size: 14px;
            color: #64748B;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 32px;
        }

        .option-button {
            background: white;
            border: 2px solid #E2E8F0;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            font-weight: 500;
        }

        .option-button:hover {
            border-color: #1E40AF;
            background: #F1F5F9;
        }

        .option-button.selected {
            border-color: #1E40AF;
            background: #EEF2FF;
            color: #1E40AF;
        }

        .next-button {
            width: 100%;
            background: #1E40AF;
            color: white;
            border: none;
            padding: 16px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.5;
            pointer-events: none;
        }

        .next-button.active {
            opacity: 1;
            pointer-events: all;
        }

        .next-button:hover {
            background: #1E3A8A;
        }

        /* 결과 페이지 */
        .result-page {
            display: none;
            padding: 24px;
            min-height: 100vh;
            background: #F8FAFC;
        }

        .result-header {
            text-align: center;
            margin-bottom: 32px;
            padding: 24px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .result-title {
            font-size: 24px;
            font-weight: 700;
            color: #1E293B;
        }

        .metrics-grid {
            display: grid;
            gap: 16px;
            margin-bottom: 32px;
        }

        .metric-card {
            background: white;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            text-align: center;
        }

        .metric-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .metric-label {
            font-size: 14px;
            color: #64748B;
        }

        .loan-amount {
            color: #1E40AF;
        }

        .success-rate {
            color: #10B981;
        }

        .risk-level {
            color: #EF4444;
        }

        .chart-container {
            width: 120px;
            height: 120px;
            margin: 0 auto 16px;
            position: relative;
        }

        .progress-circle {
            transform: rotate(-90deg);
        }

        .progress-circle-bg {
            fill: none;
            stroke: #E2E8F0;
            stroke-width: 8;
        }

        .progress-circle-fill {
            fill: none;
            stroke: #10B981;
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 283;
            stroke-dashoffset: 283;
            animation: progressAnimation 2s ease-out forwards;
        }

        @keyframes progressAnimation {
            to {
                stroke-dashoffset: calc(283 - (283 * var(--progress)) / 100);
            }
        }

        .chart-percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            font-weight: 700;
            color: #10B981;
        }

        .urgent-message {
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
            border: 2px solid #F59E0B;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .urgent-title {
            font-size: 20px;
            font-weight: 700;
            color: #92400E;
            margin-bottom: 16px;
            text-align: center;
        }

        .guide-benefits {
            list-style: none;
            margin: 16px 0;
        }

        .guide-benefits li {
            padding: 8px 0;
            color: #92400E;
        }

        .guide-benefits li::before {
            content: "✓";
            color: #10B981;
            font-weight: bold;
            margin-right: 8px;
        }

        .limited-time {
            text-align: center;
            color: #DC2626;
            font-weight: 600;
            margin-top: 16px;
        }

        /* 카톡 페이지 */
        .kakao-page {
            display: none;
            padding: 24px;
            min-height: 100vh;
            background: #FEE500;
            text-align: center;
        }

        .kakao-title {
            font-size: 24px;
            font-weight: 700;
            color: #3C1E1E;
            margin-bottom: 32px;
        }

        .kakao-benefits {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .kakao-button {
            background: #3C1E1E;
            color: white;
            border: none;
            padding: 18px 32px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }

        .kakao-button:hover {
            background: #2A1515;
        }

        .countdown-timer {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin: 24px 0;
            font-weight: 700;
            color: #DC2626;
        }

        /* 반응형 */
        @media (min-width: 768px) {
            .container {
                max-width: 600px;
            }
            
            .main-title {
                font-size: 32px;
            }
            
            .metrics-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .hidden {
            display: none;
        }

        .show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 웰컴 페이지 -->
        <div class="welcome-page" id="welcome-page">
            <h1 class="main-title">내 사업, 정책자금<br>얼마까지 받을 수 있을까?</h1>
            <p class="sub-title">1분 진단으로 알아보는 나만의 대출 한도</p>
            
            <div class="benefits">
                <div class="benefit-item">맞춤 정책자금 분석</div>
                <div class="benefit-item">실제 승인 가능성</div>
                <div class="benefit-item">전문가의 진단 기회까지</div>
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number">1,000+</div>
                    <div class="stat-label">진단 완료</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">2.3억원</div>
                    <div class="stat-label">평균 한도</div>
                </div>
            </div>

            <button class="cta-button" onclick="startTest()">
                🚀 1분만에 내 한도 확인하기
            </button>
        </div>

        <!-- 질문 페이지 -->
        <div class="question-page" id="question-page">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>

            <div class="question-header">
                <div class="question-number" id="question-number">질문 1 / 8</div>
                <h2 class="question-title" id="question-title"></h2>
                <p class="question-subtitle" id="question-subtitle"></p>
            </div>

            <div class="options" id="options"></div>

            <button class="next-button" id="next-button" onclick="nextQuestion()">
                다음 질문
            </button>
        </div>

        <!-- 결과 페이지 -->
        <div class="result-page" id="result-page">
            <div class="result-header">
                <h2 class="result-title">정책자금 대출 진단 결과</h2>
            </div>

            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value loan-amount" id="loan-amount">2억 3천만원</div>
                    <div class="metric-label">💰 예상 대출 가능액</div>
                </div>

                <div class="metric-card">
                    <div class="chart-container">
                        <svg class="progress-circle" width="120" height="120">
                            <circle class="progress-circle-bg" cx="60" cy="60" r="45"></circle>
                            <circle class="progress-circle-fill" cx="60" cy="60" r="45" id="progress-circle" style="--progress: 75"></circle>
                        </svg>
                        <div class="chart-percentage" id="success-percentage">75%</div>
                    </div>
                    <div class="metric-label">🎯 승인 가능성</div>
                </div>

                <div class="metric-card">
                    <div class="metric-value risk-level" id="risk-level">낮음</div>
                    <div class="metric-label">⚠️ 리스크 레벨</div>
                </div>
            </div>

            <div class="urgent-message">
                <h3 class="urgent-title">⏰ 더 높은 대출 한도와 성공률을 원하신다면?</h3>
                <p style="text-align: center; margin-bottom: 16px; color: #92400E; font-weight: 600;">
                    대출 성공률을 2배 높이는<br>
                    🔥 <strong>실전 가이드북</strong>을 확인해보세요
                </p>
                
                <ul class="guide-benefits">
                    <li>신용점수별 맞춤 전략</li>
                    <li>서류 준비 완벽 가이드</li>
                    <li>면담 시 핵심 포인트</li>
                    <li>승인률 90% 달성 노하우</li>
                </ul>

                <div class="limited-time">
                    ⚡ 한정된 분들에게만 특별 공개<br>
                    (XX시간 뒤 비공개 전환 예정)
                </div>
            </div>

            <button class="cta-button" onclick="goToKakao()" style="width: 100%;">
                💬 가이드북 받으러 가기
            </button>
        </div>

        <!-- 카톡 페이지 -->
        <div class="kakao-page" id="kakao-page">
            <h2 class="kakao-title">🎁 지금 바로 받아가세요!</h2>

            <div class="kakao-benefits">
                <h3 style="margin-bottom: 16px; color: #3C1E1E;">📱 카카오채널에서 확인</h3>
                <p style="color: #666; margin-bottom: 16px;">
                    🔗 아래 버튼을 클릭하세요<br>
                    → 가이드북 다운로드 가능<br>
                    → 1:1 맞춤 상담 제공
                </p>
            </div>

            <div class="countdown-timer">
                ⚡ 한정된 분들에게만 특별 공개<br>
                현재 <strong>47명</strong> 남은 자리<br>
                선착순 100명 한정
            </div>

            <button class="kakao-button" onclick="openKakaoChannel()">
                💬 클릭하고 가이드북 받기
            </button>
        </div>
    </div>

    <script>
        // 질문 데이터
        const questions = [
            {
                title: "현재 사업자 상태는 어떤가요?",
                options: [
                    { text: "① 정상 운영 중", score: 3 },
                    { text: "② 휴업 중 (재개 준비)", score: 2 },
                    { text: "③ 폐업 상태", score: 1 }
                ]
            },
            {
                title: "업력은 얼마나 되나요?",
                options: [
                    { text: "① 2년 이상", score: 3 },
                    { text: "② 6개월~24개월", score: 2 },
                    { text: "③ 6개월 미만·창업 준비", score: 1 }
                ]
            },
            {
                title: "연매출(부가세 신고 기준) 구간은?",
                options: [
                    { text: "① 3억~10억 이상", score: 3 },
                    { text: "② 1억~3억", score: 2 },
                    { text: "③ 1억 미만·모름", score: 1 }
                ]
            },
            {
                title: "최근 3년 매출 흐름은 어떤가요?",
                options: [
                    { text: "① 성장 중", score: 3 },
                    { text: "② 비슷함", score: 2 },
                    { text: "③ 감소 중", score: 1 }
                ]
            },
            {
                title: "세금(국세·지방세) 상태는?",
                options: [
                    { text: "① 체납 없음", score: 3 },
                    { text: "② 체납 있었지만 최근 6개월 내 완납", score: 2 },
                    { text: "③ 현재 체납 있음", score: 1 }
                ]
            },
            {
                title: "대표자(또는 법인) 신용점수/등급은?",
                options: [
                    { text: "① 양호 (NICE 820↑/등급 2~3)", score: 3 },
                    { text: "② 보통 (740~819/등급 4~5)", score: 2 },
                    { text: "③ 낮음·모름", score: 1 }
                ]
            },
            {
                title: "직원·4대보험 가입 인원 기준으로 보면?",
                options: [
                    { text: "① 소상공인 기준 충족 (제조 10인 미만/그 외 5인 미만)", score: 3 },
                    { text: "② 중소기업 규모에 가까움", score: 2 },
                    { text: "③ 인원·기준 잘 모름·미가입 다수", score: 1 }
                ]
            },
            {
                title: "기존 보증/대출 잔액은?",
                options: [
                    { text: "① 없음", score: 3 },
                    { text: "② 1억 미만", score: 2 },
                    { text: "③ 1억 이상", score: 1 }
                ]
            }
        ];

        let currentQuestion = 0;
        let answers = [];
        let totalScore = 0;

        function startTest() {
            document.getElementById('welcome-page').style.display = 'none';
            document.getElementById('question-page').style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            
            document.getElementById('question-number').textContent = `질문 ${currentQuestion + 1} / ${questions.length}`;
            document.getElementById('question-title').textContent = question.title;
            
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-button';
                button.textContent = option.text;
                button.onclick = () => selectOption(index, button);
                optionsContainer.appendChild(button);
            });

            updateProgress();
            
            const nextButton = document.getElementById('next-button');
            nextButton.classList.remove('active');
            nextButton.textContent = currentQuestion === questions.length - 1 ? '결과 보기' : '다음 질문';
        }

        function selectOption(optionIndex, button) {
            // 이전 선택 해제
            document.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // 현재 선택 표시
            button.classList.add('selected');
            
            // 답안 저장
            answers[currentQuestion] = {
                optionIndex: optionIndex,
                score: questions[currentQuestion].options[optionIndex].score
            };
            
            // 다음 버튼 활성화
            document.getElementById('next-button').classList.add('active');
        }

        function nextQuestion() {
            if (!answers[currentQuestion]) return;
            
            totalScore += answers[currentQuestion].score;
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showResult();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
        }

        function showResult() {
            document.getElementById('question-page').style.display = 'none';
            document.getElementById('result-page').style.display = 'block';
            
            // 점수 기반 결과 계산
            const maxScore = questions.length * 3;
            const percentage = Math.round((totalScore / maxScore) * 100);
            
            // 대출 가능액 계산 (점수에 따라)
            let loanAmount;
            if (percentage >= 80) {
                loanAmount = "3억 5천만원";
            } else if (percentage >= 60) {
                loanAmount = "2억 3천만원";
            } else if (percentage >= 40) {
                loanAmount = "1억 2천만원";
            } else {
                loanAmount = "5천만원";
            }
            
            // 승인 가능성 계산
            const successRate = Math.min(90, Math.max(30, percentage + 10));
            
            // 리스크 레벨 계산
            let riskLevel, riskColor;
            if (percentage >= 70) {
                riskLevel = "낮음";
                riskColor = "#10B981";
            } else if (percentage >= 50) {
                riskLevel = "보통";
                riskColor = "#F59E0B";
            } else {
                riskLevel = "높음";
                riskColor = "#EF4444";
            }
            
            // 결과 표시
            document.getElementById('loan-amount').textContent = loanAmount;
            document.getElementById('success-percentage').textContent = successRate + '%';
            document.getElementById('risk-level').textContent = riskLevel;
            document.getElementById('risk-level').style.color = riskColor;
            
            // 원형 그래프 애니메이션
            const circle = document.getElementById('progress-circle');
            circle.style.setProperty('--progress', successRate);
            
            // 카운트다운 시작
            startCountdown();
        }

        function goToKakao() {
            document.getElementById('result-page').style.display = 'none';
            document.getElementById('kakao-page').style.display = 'block';
        }

        function openKakaoChannel() {
            // 실제 카카오톡 채널 URL로 변경
            window.open('https://pf.kakao.com/_WDFxmn/chat', '_blank');
        }

        function startCountdown() {
            // 쿠키에서 시작 시간 확인
            let startTime = getCookie('countdown_start_time');
            
            if (!startTime) {
                // 새로운 방문자: 현재 시간을 시작 시간으로 설정
                startTime = Date.now();
                setCookie('countdown_start_time', startTime, 7); // 7일간 유지
            } else {
                // 기존 방문자: 쿠키에서 시작 시간 가져오기
                startTime = parseInt(startTime);
            }
            
            // 3시간 24분 23초 = 12,263초
            const totalSeconds = 3 * 3600 + 24 * 60 + 23;
            
            function updateCountdown() {
                const now = Date.now();
                const elapsed = Math.floor((now - startTime) / 1000); // 경과 시간(초)
                let remaining = totalSeconds - elapsed; // 남은 시간(초)
                
                if (remaining <= 0) {
                    // 시간이 끝나면 다시 리셋 (에버그린)
                    startTime = Date.now();
                    setCookie('countdown_start_time', startTime, 7);
                    remaining = totalSeconds;
                }
                
                // 시, 분, 초 계산
                const hours = Math.floor(remaining / 3600);
                const minutes = Math.floor((remaining % 3600) / 60);
                const seconds = remaining % 60;
                
                // 시간 포맷팅 (두 자리 수로 맞춤)
                const timeString = `${hours}시간 ${String(minutes).padStart(2, '0')}분 ${String(seconds).padStart(2, '0')}초`;
                
                // 카톡 페이지만 업데이트
                const countdownKakaoElement = document.getElementById('countdown-kakao');
                
                if (countdownKakaoElement) {
                    countdownKakaoElement.textContent = timeString;
                }
            }
            
            // 즉시 실행 후 1초마다 업데이트
            updateCountdown();
            const intervalId = setInterval(updateCountdown, 1000);
            
            // 전역 변수로 저장해서 필요시 정지 가능
            window.countdownInterval = intervalId;
        }
        
        // 쿠키 설정 함수
        function setCookie(name, value, days) {
            const expires = new Date();
            expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
            document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/`;
        }
        
        // 쿠키 가져오기 함수
        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        // 페이지 로드 시 초기화
        window.addEventListener('load', function() {
            // 페이지 로드 시 카운트다운 시작
            startCountdown();
        });
    </script>
</body>
</html>
